arbiter:
  image:
    repository: ghcr.io/sargent-michael/arbiter
    tag: "1.0.9"
  metrics:
    enabled: true
    serviceMonitor:
      enabled: false
    reader:
      enabled: false
  webhook:
    enabled: true
  certManager:
    enabled: true
  grafanaDashboard:
    enabled: true

prometheus:
  enabled: true
  fullnameOverride: arbiter-stack-prometheus
  serverFiles:
    prometheus.yml:
      scrape_configs:
        - job_name: arbiter-controller
          scheme: https
          tls_config:
            insecure_skip_verify: true
          static_configs:
            - targets:
                - arbiter-stack-arbiter-controller-manager-metrics-service.arbiter-system.svc:8443

grafana:
  enabled: true
  fullnameOverride: arbiter-stack-grafana
  adminPassword: arbiter
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
      labelValue: "1"
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
        - name: Prometheus
          type: prometheus
          access: proxy
          url: http://arbiter-stack-prometheus-server
          isDefault: true
        - name: Loki
          type: loki
          access: proxy
          url: http://arbiter-stack-loki:3100

loki:
  enabled: true
  fullnameOverride: arbiter-stack-loki
  deploymentMode: SingleBinary
  singleBinary:
    replicas: 1
  read:
    replicas: 0
  write:
    replicas: 0
  backend:
    replicas: 0
  loki:
    auth_enabled: false
    commonConfig:
      path_prefix: /var/loki
      replication_factor: 1
    storage:
      type: filesystem
    useTestSchema: true

promtail:
  enabled: true
  fullnameOverride: arbiter-stack-promtail
  config:
    clients:
      - url: http://arbiter-stack-loki:3100/loki/api/v1/push

cert-manager:
  enabled: true
  installCRDs: false
